{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonsForm.js","components/Notification.js","services/person.js","App.js","index.js"],"names":["Filter","searchPerson","handleSearch","value","onChange","Persons","person","handleDelete","name","number","onClick","PersonsForm","onSubmit","onChangeName","onChangeNumber","type","Notification","message","classes","isError","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setSearchPerson","notification","setNotification","errorMessage","setErrorMessage","useEffect","personService","initialPersons","catch","err","console","log","personsToShow","filter","toLocaleLowerCase","includes","personToDelete","window","confirm","alert","setTimeout","event","target","preventDefault","personObject","date","Date","toISOString","length","found","find","el","toLowerCase","changedPerson","returnedPerson","map","concat","error","key","ReactDOM","render","document","getElementById"],"mappings":"0NAciBA,EAZF,SAAC,GAAiC,IAAhCC,EAA+B,EAA/BA,aAAcC,EAAiB,EAAjBA,aAC3B,OACE,6BACI,8BACE,kDACoB,2BAAOC,MAAOF,EAAcG,SAAUF,QCIrDG,EATD,SAAC,GAA4B,IAA3BC,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,aACtB,OACE,6BACE,+BAAQD,EAAOE,KAAf,IAAsBF,EAAOG,OAA7B,KACA,4BAAQC,QAAS,kBAAIH,EAAaD,KAAlC,cCaOK,EAjBK,SAAC,GAA2D,IAA1DC,EAAyD,EAAzDA,SAAUJ,EAA+C,EAA/CA,KAAMC,EAAyC,EAAzCA,OAAQI,EAAiC,EAAjCA,aAAcC,EAAmB,EAAnBA,eAExD,OACI,0BAAMF,SAAUA,GACZ,sCACU,2BAAOT,MAAOK,EAAMJ,SAAUS,KAExC,wCACY,2BAAOV,MAAOM,EAAQL,SAAUU,KAE5C,6BACI,4BAAQC,KAAK,UAAb,UCFDC,EATM,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,QACdC,EADoC,EAAbC,QACH,QAAU,eACpC,OACI,yBAAKC,UAAWF,GACXD,I,gBCLPI,EAAU,eAsBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB9B,EAfA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa9B,EAVA,SAACG,EAAIF,GAEhB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALA,SAAAG,GAEX,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SC2H9BM,EAxIH,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACRC,EADQ,KACCC,EADD,OAEgBF,mBAAS,IAFzB,mBAERG,EAFQ,KAECC,EAFD,OAGoBJ,mBAAS,IAH7B,mBAGRK,EAHQ,KAGGC,EAHH,OAIwBN,mBAAS,IAJjC,mBAIThC,EAJS,KAIKuC,EAJL,OAKwBP,mBAAS,IALjC,mBAKTQ,EALS,KAKKC,EALL,OAMwBT,mBAAS,IANjC,mBAMTU,EANS,KAMKC,EANL,KAQhBC,qBAAU,WACRC,IAEGtB,MAAK,SAAAuB,GACJZ,EAAWY,MAEZC,OAAM,SAAAC,GACLC,QAAQC,IAAIF,QAEf,IAEH,IAAMG,EAAiBnD,EAErBiC,EAAQmB,QAAO,SAAA/C,GAAM,OACnBA,EAAOE,KAAK8C,oBAAoBC,SAAStD,EAAaqD,wBAFxDpB,EAcI3B,EAAe,SAAAiD,GAAkB,IAC9B3B,EAAY2B,EAAZ3B,GAAIrB,EAAQgD,EAARhD,KACIiD,OAAOC,QAAP,kBAA0BlD,EAA1B,QAEbsC,EACUjB,GACPL,MAAK,WACJW,EAAWD,EAAQmB,QAAO,SAAA/C,GAAM,OAAIA,EAAOuB,KAAOA,MAClD4B,OAAOE,MAAP,UAAgBnD,EAAhB,0BACCwC,OAAM,WACPJ,EAAgB,kBAAD,OACKpC,EADL,yCAEboD,YAAW,WACThB,EAAgB,QACf,KACHT,EAAWD,EAAQmB,QAAO,SAAA/C,GAAM,OAAIA,EAAOuB,KAAOA,UAyD5D,OACE,6BACE,yCACGc,EACC,kBAAC,EAAD,CAAc1B,QAAS0B,EAAcxB,SAAS,IAC7CsB,EACC,kBAAC,EAAD,CAAcxB,QAASwB,EAActB,SAAS,IAC/C,KAEH,kBAAC,EAAD,CAAQlB,aAAcA,EAAcC,aArFrB,SAAC2D,GACpBrB,EAAgBqB,EAAMC,OAAO3D,UAqFzB,6BACE,yCACA,kBAAC,EAAD,CACES,SAjEQ,SAACiD,GACjBA,EAAME,iBACN,IAAMC,EAAe,CACnBxD,KAAM4B,EACN3B,OAAQ6B,EACR2B,MAAM,IAAIC,MAAOC,cACjBtC,GAAIK,EAAQkC,OAAS,GAEjBC,EAAQnC,EAAQoC,MAAK,SAAAC,GAAE,OAAIA,EAAG/D,KAAKgE,gBAAkBR,EAAaxD,KAAKgE,iBAC7E,GAAKH,GAgBD,GADeZ,OAAOC,QAAP,UAAkBM,EAAaxD,KAA/B,2EACJ,CACT,IAAMiE,EAAa,2BAAOJ,GAAP,IAAc5D,OAAQ6B,IACzCQ,EACU2B,EAAc5C,GAAI4C,GACzBjD,MAAK,SAAAkD,GACJvC,EAAWD,EAAQyC,KAAI,SAAArE,GAAM,OAC3BA,EAAOuB,KAAO4C,EAAc5C,GAAKvB,EAASoE,MAC5ChC,EAAgB,aAAD,OAAc+B,EAAcjE,KAA5B,gBAEhBwC,OAAM,SAAAC,GACLd,EACED,EAAQmB,QAAO,SAAA/C,GAAM,OAAGA,EAAOuB,KAAO4C,EAAc5C,OAEtDe,EAAgB,kBAAD,OACK6B,EAAcjE,KADnB,uDA5BvBsC,EACUkB,GACPxC,MAAK,SAAAkD,GACJvC,EAAWD,EAAQ0C,OAAOF,IAC1BhC,EAAgB,SAAD,OAAUgC,EAAelE,UACvCwC,OAAM,SAAAC,GACPL,EAAgBK,EAAIxB,SAASC,KAAKmD,OAClCjB,YAAW,WACThB,EAAgB,QACf,KACHT,EAAWD,EAAQmB,QAAO,SAAA/C,GAAM,OAAIA,EAAOuB,KAAOmC,EAAanC,UAwBnEQ,EAAW,IACXE,EAAa,IACbqB,YAAW,WACTlB,EAAgB,IAChBE,EAAgB,MACf,MAiBGpC,KAAM4B,EACN3B,OAAQ6B,EACRzB,aAlGe,SAACgD,GACxBxB,EAAWwB,EAAMC,OAAO3D,QAkGhBW,eAhGiB,SAAC+C,GAC1BtB,EAAasB,EAAMC,OAAO3D,WAiGtB,uCACCiD,EAAcuB,KAAI,SAAArE,GAAM,OACvB,kBAAC,EAAD,CACEwE,IAAKxE,EAAOuB,GACZvB,OAAQA,EACRC,aAAcA,S,MCnI1BwE,IAASC,OAAO,kBAAC,EAAD,MACdC,SAASC,eAAe,W","file":"static/js/main.cab52a56.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({searchPerson, handleSearch}) =>{\r\n    return(\r\n      <div>\r\n          <form>\r\n            <div>\r\n              filter shown with <input value={searchPerson} onChange={handleSearch}/>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    )\r\n  }\r\n\r\n  export default Filter;","import React from 'react';\r\n\r\nconst Persons = ({person, handleDelete}) => {\r\n    return (\r\n      <div>\r\n        <label>{person.name} {person.number} </label>\r\n        <button onClick={()=>handleDelete(person)}> Delete </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Persons;","import React from 'react';\r\n\r\nconst PersonsForm = ({onSubmit, name, number, onChangeName, onChangeNumber}) =>{\r\n\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <div>\r\n                name: <input value={name} onChange={onChangeName} />\r\n            </div>\r\n            <div>\r\n                number: <input value={number} onChange={onChangeNumber} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default PersonsForm;","import React from 'react';\r\n\r\nconst Notification = ({ message, isError }) =>{\r\n    const classes = isError ? \"error\" : \"notification\";\r\n    return (\r\n        <div className={classes}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification;","import axios from 'axios';\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data);\r\n} \r\n\r\nconst update = (id, newObject) =>{ \r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst remove = id =>{\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default {getAll, create, update, remove}","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Persons from './components/Persons';\nimport PersonsForm from './components/PersonsForm';\nimport Notification from './components/Notification';\nimport personService from './services/person';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]); \n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [searchPerson, setSearchPerson] = useState('');\n  const [notification, setNotification] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons =>{\n        setPersons(initialPersons)\n      })\n      .catch(err =>{\n        console.log(err)\n      })\n  }, [])\n\n  const personsToShow = !searchPerson\n  ? persons \n  : persons.filter(person =>\n      person.name.toLocaleLowerCase().includes(searchPerson.toLocaleLowerCase()))\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleSearch = (event) => {\n    setSearchPerson(event.target.value)\n  }\n\n  const handleDelete = personToDelete =>{\n    const {id, name} = personToDelete;\n    const answer = window.confirm(`Delete '${name}'?`);\n    if (answer){\n      personService\n        .remove(id)\n        .then(() =>{\n          setPersons(persons.filter(person => person.id !== id));\n          window.alert(`${name} has been removed!`);\n        }).catch(() => {\n          setErrorMessage(\n            `Information of ${name} has already removed from the server`);\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000);\n            setPersons(persons.filter(person => person.id !== id));\n          });\n    }\n  }\n  \n  const handleAdd = (event)=>{\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      date: new Date().toISOString(),\n      id: persons.length + 1\n    }\n    const found = persons.find(el => el.name.toLowerCase() === personObject.name.toLowerCase())\n    if (!found) {\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNotification(`Added ${returnedPerson.name}`);\n        }).catch(err => {\n          setErrorMessage(err.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000);\n          setPersons(persons.filter(person => person.id !== personObject.id));\n        });\n      }\n      else {\n        const answer = window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)\n        if (answer){\n          const changedPerson = {...found, number: newNumber}\n          personService\n            .update(changedPerson.id, changedPerson)\n            .then(returnedPerson =>{\n              setPersons(persons.map(person =>\n                person.id !== changedPerson.id ? person : returnedPerson));\n              setNotification(`Number of ${changedPerson.name} changed`);\n            })\n            .catch(err =>{\n              setPersons(\n                persons.filter(person =>person.id !== changedPerson.id)\n              );\n              setErrorMessage(\n                `Information of ${changedPerson.name} has already been removed from the server`\n              );\n            });\n        }  \n      }\n      setNewName('');\n      setNewNumber('');\n      setTimeout(()=>{\n        setNotification('');\n        setErrorMessage('');\n      }, 5000);\n    }; \n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n        {errorMessage \n        ? <Notification message={errorMessage} isError={true}/>\n        : (notification \n          ? <Notification message={notification} isError={false}/>\n          :null)}\n\n        <Filter searchPerson={searchPerson} handleSearch={handleSearch}/>\n        <div>\n          <h2>add a new</h2>\n          <PersonsForm \n            onSubmit={handleAdd} \n            name={newName} \n            number={newNumber} \n            onChangeName={handleNameChange}\n            onChangeNumber={handleNumberChange}/>\n        </div>\n        <h2>Numbers</h2>\n        {personsToShow.map(person => \n          <Persons \n            key={person.id} \n            person={person} \n            handleDelete={handleDelete}/>)}\n    </div>\n  )\n  \n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}